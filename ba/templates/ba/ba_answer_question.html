{% extends 'base.html' %}

{% block title %} 問題解答 {% endblock %}

{% block main %}
  	<div class="container mt-5">
    	<h2>問題{{ current_question_number }}: {{ question.text }}</h2>
    	<form method="post">
      		{% csrf_token %}
      		{% for option in options %}
        		<input type="radio" id="option_{{ option.id }}" name="answer" value="{{ option.id }}">
        		<label for="option_{{ option.id }}">{{ option.text }}</label><br>
      		{% endfor %}
      		<br>
      		{% if not result %}
      			<button type="submit" class="btn btn-outline-success">解答する</button>
      		{% endif %}
    	</form>
    	
    	<br><br>
    	{% if result %}
      		<p>{{ result }}</p>
      		<p>現在の得点: {{ score }}</p>
      		<br>
      		<h4>正解</h4>
      		<p>{{ correct_option }}</p>
      		<br>
      		<p>あなたの解答：{{ selected_option }}</p>
      		
      		<h4>解説</h4>
      		<p>{{ question.explanation }}</p>
    	{% endif %}
    	
    	<br>

		{% if not is_last_question %}
			{% if next_question_id %}
		        <a href="{% url 'ba:answer_question' pk=next_question_id %}" class="btn btn-primary">次の問題に進む</a>
		    {% endif %}
		{% else %}
		    <a href="{% url 'ba:result' current_score.pk %}" class="btn btn-primary">終了する</a>
		{% endif %}

        <br><br>
  	</div>
{% endblock %}
