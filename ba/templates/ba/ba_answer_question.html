{% extends 'base.html' %}

{% block title %} 問題解答 {% endblock %}

{% block main %}
  	<div class="container mt-5">
    	<h2>問題{{ current_question_number }}: {{ question.text }}</h2>
    	<form method="post">
      		{% csrf_token %}
      		{% for option in options %}
        		{% if question.is_multi %}
		            <input type="checkbox" id="option_{{ option.id }}" name="answer" value="{{ option.id }}">
		        {% else %}
		            <input type="radio" id="option_{{ option.id }}" name="answer" value="{{ option.id }}">
		        {% endif %}
        		<label for="option_{{ option.id }}">{{ option.text }}</label><br>
      		{% endfor %}
      		<br>
      		{% if not result %}
      			<button type="submit" class="btn btn-outline-success">解答する</button>
      		{% endif %}
    	</form>
    	
    	<br><br>
    	{% if result %}
    		{% if is_correct %}
    			<p style="color: green; font-size: 25px;">{{ result }}</p>
    		{% else %}
    			<p class="incorrect-answer">{{ result }}</p>
    		{% endif %}
    		
      		<p>現在の得点: {{ score }}</p>
      		<br>
      		<h4>正解</h4>
      		<ul>
			    {% for option in correct_options %}
			      	<li>{{ option.text }}</li>
			    {% endfor %}
			</ul>
      		<br>
      		<p>あなたの解答：</p>
      		<ul>
		        {% for option in selected_options %}
		            <li>{{ option.text }}</li>
		        {% endfor %}
		    </ul>
      		
      		<h4>解説</h4>
      		<p>{{ question.explanation }}</p>
    	{% endif %}
    	
    	<br>

		{% if not is_last_question %}
			{% if next_question_id %}
		        <a href="{% url 'ba:answer_question' pk=next_question_id %}" class="btn btn-primary">次の問題に進む</a>
		    {% endif %}
		{% else %}
		    {% if final_score %}
                <a href="{% url 'ba:result' final_score.pk %}" class="btn btn-primary">終了する</a>
            {% else %}
                
            {% endif %}
		{% endif %}

        <br><br>
  	</div>
{% endblock %}
